<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">

<link rel="stylesheet" href="css/mystyle.css" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">
<!-- <link -->
<!-- 	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" -->
<!-- 	rel="stylesheet" -->
<!-- 	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" -->
<!-- 	crossorigin="anonymous"> -->

<title>Profile</title>

</head>

<body>
	<header>
		<div class="header_part1">
			<div>
				<a class="btn btn-ok" href="/home">Pay My Buddy</a>
			</div>
			<div class="nav">
				<ul class="nav nav-tabs card-header-tabs">
					<li><a class="nav-link" href="/home">Home</a></li>
					<li><a class="nav-link" href="/transfer">Transfer</a></li>
					<li><a class="nav-link active" href="/profile"
						aria-current="true">Profile</a></li>
					<li><a class="nav-link" href="/contact">Contact</a></li>
					<!-- 					<li><a class="nav-link" href="/logout">Logoff</a></li> -->
					<li>
						<form method="post" th:action="@{/logout}">
							<input type="submit" class="nav-link" value="Log off">
						</form>
					</li>
				</ul>
			</div>
		</div>
		<div class="header_part2">
				<p class="py-2 mx-2">Home / Profile</p>
		</div>
	</header>

	<section>
		<div class="container special">
			<h2 class="h2">PROFILE</h2>
			
			<a href="/profile">
							<div data-th-if="${newNumber} != 1"
								class="alert alert-success" role="alert">
								<p>
									<strong>PHONE SUCCESSFULLY UPDATED :</strong> 
								</p>
								<p> Old number :
									<span data-th-text="${oldNumber}"> </span> - New number <span
										data-th-text="${newNumber}"> </span>
								</p>
							</div>
						</a>
						
									<a href="/profile">
							<div data-th-if="${passwordModified} != null"
								class="alert alert-success" role="alert">
								<p>
									<strong>PASSWORD UPDATED SUCCESSFULLY :</strong> 
								</p>
								<p>
									<span data-th-text="${passwordModified}"> </span>
								</p>
							</div>
						</a>

			<div class="table-responsive">

				<table class="table table-striped table-sm">
					<thead>
						<tr>
							<th>EMAIL</th>
							<th>BALANCE</th>
							<th>ACTION</th>
						</tr>
					</thead>
					<tbody>

						<tr>
							<td><span data-th-text="${u.email}"> </span></td>
							<td><span
								data-th-text="${#numbers.formatDecimal(u.balance,1,2)}"></span>
								â‚¬</td>

							<td><a th:href="@{deleteappuser}">
									<button class="btn btn-danger">UNSUBSCRIBE</button>
							</a></td>

						</tr>
					</tbody>


					<thead>
						<tr>
							<th>ACCOUNT</th>
							<th>BANK</th>
						</tr>
					</thead>

					<tbody>

						<tr>
							<td><span data-th-text="${a.id}"> </span></td>
							<td><span data-th-text="${a.bank}"> </span></td>
						</tr>
					</tbody>


					<thead>
						<tr>
							<th>PSEUDO</th>
							<th>PHONE</th>
						</tr>
					</thead>

					<tbody>

						<tr>
							<td><span data-th-text="${u.pseudo}"></span></td>
							<td><span data-th-text="${u.phone}"></span></td>

						</tr>
					</tbody>

					<!-- 				</table> -->
					<!-- 				<table> -->

					<tbody>

						<tr>
							<form th:action="@{/updatephone}" th:object="${u}" method="post">
								<td colspan="2">
									<div class="form-group">
										<input th:field="*{phone}" type="number" min="3" max="20" step="1"
											class="form-control" placeholder="New phone" required /> <small
											class="form-text text-muted"> Please enter a new
											phone for the update. </small>
									</div>
								</td>
								<td>
									<button type="submit" class="btn btn-primary">UPDATE
										PHONE</button>
								</td>
							</form>
						</tr>


						<tr>
							<form th:action="@{/updatepassword}" th:object="${u}"
								method="post">
								<td colspan="2">
									<div class="form-group">
										<input th:field="*{password}" type="password"
											class="form-control" aria-describedby="mailHelp"
											placeholder="New password"
											pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
											title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
											required /> <small id="passwordHelp"
											class="form-text text-muted"> Please enter a new
											password for the update. It must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters </small>
									</div>
								</td>
								<td><a>
										<button type="submit" class="btn btn-primary">UPDATE
											PASSWORD</button>
								</a></td>
							</form>
						</tr>


					</tbody>

				</table>
			</div>
		</div>
	</section>
</body>

</html>